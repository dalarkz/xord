<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kali Linux Desktop - Charles Arsenault</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: #000;
            overflow: hidden;
            height: 100vh;
        }

        /* --- √âCRAN DE LOGIN --- */
        #login-screen {
            position: fixed; inset: 0;
            background: radial-gradient(circle, #1a1a2e 0%, #0a0a0a 100%);
            z-index: 9999; display: flex; flex-direction: column;
            align-items: center; justify-content: center; color: white;
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }
        #login-screen.hidden { opacity: 0; transform: scale(1.2); pointer-events: none; }

        @keyframes glitch {
            0% { text-shadow: 2px 0 red, -2px 0 blue; }
            25% { text-shadow: -2px 0 red, 2px 0 blue; }
            50% { text-shadow: 2px 0 blue, -2px 0 red; }
            100% { text-shadow: 2px 0 red, -2px 0 blue; }
        }
        .login-logo { font-size: 80px; margin-bottom: 20px; animation: glitch 0.2s infinite; cursor: default; }

        /* --- MATRIX BACKGROUND --- */
        #matrix-canvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 0; opacity: 0.15; pointer-events: none;
        }

        .desktop {
            height: calc(100vh - 40px);
            position: relative; z-index: 1;
            background: rgba(26, 26, 46, 0.5);
        }

        /* --- TASKBAR & MENUS --- */
        .taskbar {
            position: fixed; bottom: 0; left: 0; right: 0; height: 40px;
            background: #1a1a2e; border-top: 1px solid #367bf0;
            display: flex; align-items: center; padding: 0 10px; z-index: 1000;
        }

        .app-menu-btn {
            background: #367bf0; color: white; padding: 6px 12px;
            border-radius: 4px; cursor: pointer; font-weight: bold;
            display: flex; align-items: center; gap: 8px; font-size: 14px;
        }

        .menu-panel {
            position: fixed; bottom: 45px; left: 10px; width: 300px;
            background: #1a1a2e; border: 1px solid #367bf0; border-radius: 8px;
            display: none; padding: 15px; z-index: 999; box-shadow: 0 5px 20px rgba(0,0,0,0.5);
        }
        .menu-panel.active { display: block; }
        .menu-category { color: #367bf0; font-weight: bold; margin: 10px 0 5px 0; font-size: 11px; text-transform: uppercase; }
        .menu-item { padding: 8px; color: white; cursor: pointer; border-radius: 4px; display: flex; align-items: center; gap: 10px; font-size: 14px; }
        .menu-item:hover { background: #367bf0; }

        /* --- FEN√äTRES --- */
        .window {
            position: absolute; background: #2a2a3e; border: 1px solid #367bf0;
            border-radius: 8px; min-width: 300px; display: none; flex-direction: column;
            box-shadow: 0 10px 40px rgba(0,0,0,0.5); overflow: hidden;
        }
        .window.active { display: flex; z-index: 100; }
        .window-header {
            background: #1a1a2e; padding: 10px; border-bottom: 1px solid #367bf0;
            display: flex; justify-content: space-between; align-items: center; cursor: move;
        }
        .window-title { color: white; font-size: 13px; font-weight: bold; pointer-events: none; }
        .window-controls { display: flex; gap: 8px; }
        .window-control { width: 12px; height: 12px; border-radius: 50%; cursor: pointer; }
        .close { background: #ff6b6b; }
        .maximize { background: #50c878; }
        .minimize { background: #f4c430; }
        .window-content { flex: 1; padding: 15px; color: #fff; overflow: auto; background: #1e1e2e; }

        /* --- ICONS --- */
        .desktop-icon {
            width: 85px; padding: 10px; text-align: center; color: white;
            cursor: pointer; border-radius: 6px; position: absolute; transition: 0.2s;
            z-index: 2;
        }
        .desktop-icon:hover { background: rgba(54, 123, 240, 0.2); }
        .desktop-icon .icon { font-size: 38px; margin-bottom: 5px; }
        .desktop-icon .label { font-size: 11px; text-shadow: 1px 1px 2px #000; }

        /* --- TERMINAL --- */
        .terminal { background: #0a0a0a; font-family: 'Courier New', monospace; height: 100%; padding: 10px; font-size: 14px; }
        .terminal-line { color: #0f0; margin: 2px 0; white-space: pre-wrap; }
        .terminal-input { background: none; border: none; color: #0f0; outline: none; width: 70%; font-family: inherit; }

        /* --- WIRESHARK STYLING --- */
        #packet-table { width: 100%; border-collapse: collapse; font-family: 'Courier New', monospace; font-size: 10px; }
        #packet-table th { text-align: left; background: #333; padding: 4px; color: #ddd; position: sticky; top: 0; }
        #packet-table td { padding: 2px 4px; border-bottom: 1px solid rgba(255,255,255,0.05); }
        .proto-tcp { background: #e7e7ff; color: #000; }
        .proto-http { background: #e7ffe7; color: #000; }
        .proto-tls { background: #ffe7ff; color: #000; }
        .proto-dns { background: #f0f0f0; color: #000; }

        /* --- PROGRESS BARS --- */
        .progress-bar { background: #2a2a3e; height: 12px; border-radius: 6px; overflow: hidden; margin: 5px 0; }
        .progress-fill { background: #367bf0; height: 100%; transition: width 0.5s; }

        /* --- BOUTONS --- */
        .calc-btn { background: #367bf0; color: white; border: none; padding: 10px; border-radius: 4px; cursor: pointer; font-size: 13px; }
        .calc-btn:hover { background: #2868d8; }

        /* --- NOTIFICATIONS --- */
        .notification {
            position: fixed; top: 20px; right: 20px; background: #1a1a2e; border: 1px solid #367bf0;
            padding: 15px; border-radius: 8px; color: white; z-index: 10000; animation: slideIn 0.3s;
        }
        @keyframes slideIn { from { transform: translateX(100%); } to { transform: translateX(0); } }

        /* --- CONTEXT MENU --- */
        #context-menu { position: absolute; background: #1a1a2e; border: 1px solid #367bf0; display: none; z-index: 3000; padding: 5px 0; border-radius: 4px; min-width: 150px; }
        .context-item { padding: 8px 15px; color: white; cursor: pointer; font-size: 13px; }
        .context-item:hover { background: #367bf0; }
    </style>
</head>
<body>

    <div id="login-screen">
        <div class="login-logo">üêâ</div>
        <h2 style="margin-bottom: 20px; letter-spacing: 5px;">KALI LINUX</h2>
        <div style="background: rgba(255,255,255,0.05); padding: 30px; border-radius: 12px; width: 320px; text-align: center; border: 1px solid rgba(54, 123, 240, 0.3);">
            <div style="margin-bottom: 20px;">
                <div style="font-size: 11px; color: #367bf0; text-transform: uppercase; margin-bottom: 5px;">Utilisateur</div>
                <div style="font-size: 18px; font-weight: bold; margin-bottom: 15px;">Charles Arsenault</div>
                <input type="password" id="login-pass" placeholder="kali" autofocus
                    style="width: 100%; padding: 10px; background: rgba(0,0,0,0.5); border: 1px solid #367bf0; color: white; border-radius: 4px; outline: none; text-align: center;">
            </div>
            <button class="calc-btn" style="width: 100%; padding: 12px;" onclick="unlockSystem()">SE CONNECTER</button>
            <div id="login-error" style="color: #ff6b6b; font-size: 12px; margin-top: 10px; display: none;">Mot de passe incorrect</div>
        </div>
    </div>

    <canvas id="matrix-canvas"></canvas>

    <div class="desktop" id="desktop">
        <div class="desktop-icon" style="top: 20px; left: 20px;" data-app="terminal">
            <div class="icon">üíª</div><div class="label">Terminal</div>
        </div>
        <div class="desktop-icon" style="top: 120px; left: 20px;" data-app="cv">
            <div class="icon">üë§</div><div class="label">Mon CV</div>
        </div>
        <div class="desktop-icon" style="top: 220px; left: 20px;" data-app="editor">
            <div class="icon">üìù</div><div class="label">√âditeur</div>
        </div>
        <div class="desktop-icon" style="top: 320px; left: 20px;" data-app="sniffer">
            <div class="icon">üîç</div><div class="label">Wireshark</div>
        </div>

        <div class="desktop-icon" style="top: 20px; right: 20px;" data-app="scanner">
            <div class="icon">üì°</div><div class="label">NetScanner</div>
        </div>
        <div class="desktop-icon" style="top: 120px; right: 20px;" data-app="monitor">
            <div class="icon">üìä</div><div class="label">Moniteur</div>
        </div>
        <div class="desktop-icon" style="top: 220px; right: 20px;" data-app="passgen">
            <div class="icon">üîë</div><div class="label">PassGen</div>
        </div>
        <div class="desktop-icon" style="top: 320px; right: 20px;" data-app="calc">
            <div class="icon">üî¢</div><div class="label">Calculatrice</div>
        </div>

        <div class="window" id="terminal-window" style="left: 100px; top: 100px; width: 600px; height: 380px;">
            <div class="window-header"><div class="window-title">üêâ Terminal</div><div class="window-controls"><div class="window-control close" data-window="terminal-window"></div></div></div>
            <div class="window-content terminal" id="terminal">
                <div class="terminal-line">Kali GNU/Linux 2024.1 LTS - Session: charles@kali</div>
                <div class="terminal-line" id="input-line"><span style="color:#367bf0">kali@kali:~$</span> <input type="text" class="terminal-input" id="terminal-input"></div>
            </div>
        </div>

        <div class="window" id="cv-window" style="left: 150px; top: 50px; width: 500px; height: 450px;">
            <div class="window-header"><div class="window-title">üìÑ CV_Arsenault.sh</div><div class="window-controls"><div class="window-control close" data-window="cv-window"></div></div></div>
            <div class="window-content" style="background: #0d0d0d; font-family: monospace;">
                <div style="border: 1px dashed #367bf0; padding: 15px;">
                    <h2 style="color: #367bf0; text-align: center;">CHARLES ARSENAULT</h2>
                    <p style="text-align: center; font-size: 11px; margin-bottom: 15px;">Technicien en soutien informatique</p>
                    <p style="font-size: 12px;">‚Ä¢ Windows / Linux Admin<br>‚Ä¢ Cybers√©curit√© Junior<br>‚Ä¢ R√©seautique (CCNA level)</p>
                    <button class="calc-btn" style="display: block; margin: 20px auto;" onclick="downloadCV()">./download_cv.sh</button>
                </div>
            </div>
        </div>

        <div class="window" id="sniffer-window" style="left: 350px; top: 150px; width: 650px; height: 350px;">
            <div class="window-header"><div class="window-title">üîç Wireshark (eth0)</div><div class="window-controls"><div class="window-control close" data-window="sniffer-window"></div></div></div>
            <div class="window-content" style="background: #fff; padding: 0; overflow-y: auto;">
                <table id="packet-table">
                    <thead><tr><th>No.</th><th>Time</th><th>Source</th><th>Destination</th><th>Protocol</th><th>Info</th></tr></thead>
                    <tbody id="packet-body"></tbody>
                </table>
            </div>
        </div>

        <div class="window" id="scanner-window" style="left: 200px; top: 200px; width: 400px; height: 300px;">
            <div class="window-header"><div class="window-title">üì° Nmap Scanner</div><div class="window-controls"><div class="window-control close" data-window="scanner-window"></div></div></div>
            <div class="window-content">
                <div id="scan-res" style="background: #000; height: 160px; padding: 10px; font-family: monospace; color: #0f0; font-size: 11px; overflow-y: auto;">Pr√™t pour le scan...</div>
                <button class="calc-btn" id="scan-btn" style="width: 100%; margin-top: 15px;" onclick="runScan()">LANCER NMAP</button>
            </div>
        </div>

        <div class="window" id="monitor-window" style="left: 450px; top: 80px; width: 280px; height: 200px;">
            <div class="window-header"><div class="window-title">üìä System Monitor</div><div class="window-controls"><div class="window-control close" data-window="monitor-window"></div></div></div>
            <div class="window-content">
                <p>CPU: <span id="cpu-val">10%</span></p>
                <div class="progress-bar"><div class="progress-fill" id="cpu-fill" style="width: 10%"></div></div>
                <p style="margin-top: 10px;">RAM: <span id="ram-val">42%</span></p>
                <div class="progress-bar"><div class="progress-fill" id="ram-fill" style="width: 42%; background: #50c878;"></div></div>
            </div>
        </div>

        <div class="window" id="passgen-window" style="left: 550px; top: 250px; width: 280px; height: 180px;">
            <div class="window-header"><div class="window-title">üîë PassGen</div><div class="window-controls"><div class="window-control close" data-window="passgen-window"></div></div></div>
            <div class="window-content" style="text-align: center;">
                <div id="pass-out" style="padding: 10px; background: #000; color: #50c878; margin-bottom: 10px; border: 1px solid #367bf0; font-family: monospace;">**********</div>
                <button class="calc-btn" style="width: 100%;" onclick="generatePass()">G√âN√âRER</button>
            </div>
        </div>

        <div class="window" id="calc-window" style="left: 650px; top: 120px; width: 240px; height: 320px;">
            <div class="window-header"><div class="window-title">üî¢ Calculatrice</div><div class="window-controls"><div class="window-control close" data-window="calc-window"></div></div></div>
            <div class="window-content">
                <div id="calc-display" style="background: #000; padding: 10px; text-align: right; font-size: 20px; margin-bottom: 10px;">0</div>
                <div style="display: grid; grid-template-columns: repeat(4, 1fr); gap: 5px;">
                    <button class="calc-btn" onclick="pressCalc('7')">7</button><button class="calc-btn" onclick="pressCalc('8')">8</button><button class="calc-btn" onclick="pressCalc('9')">9</button><button class="calc-btn" onclick="pressCalc('/')">/</button>
                    <button class="calc-btn" onclick="pressCalc('4')">4</button><button class="calc-btn" onclick="pressCalc('5')">5</button><button class="calc-btn" onclick="pressCalc('6')">6</button><button class="calc-btn" onclick="pressCalc('*')">*</button>
                    <button class="calc-btn" onclick="pressCalc('1')">1</button><button class="calc-btn" onclick="pressCalc('2')">2</button><button class="calc-btn" onclick="pressCalc('3')">3</button><button class="calc-btn" onclick="pressCalc('-')">-</button>
                    <button class="calc-btn" onclick="pressCalc('0')">0</button><button class="calc-btn" onclick="pressCalc('C')">C</button><button class="calc-btn" onclick="pressCalc('=')" style="grid-column: span 2;">=</button>
                </div>
            </div>
        </div>

        <div class="window" id="editor-window" style="left: 120px; top: 180px; width: 400px; height: 280px;">
            <div class="window-header"><div class="window-title">üìù Mousepad</div><div class="window-controls"><div class="window-control close" data-window="editor-window"></div></div></div>
            <div class="window-content" style="padding: 0;">
                <textarea style="width: 100%; height: 100%; background: #1a1a2e; color: #fff; border: none; padding: 10px; outline: none; resize: none; font-family: monospace;">Note: Charles Arsenault - Portfolio V2</textarea>
            </div>
        </div>
    </div>

    <div id="context-menu">
        <div class="context-item" onclick="openWindow('terminal-window')">Ouvrir Terminal</div>
        <div class="context-item" onclick="location.reload()">Reboot System</div>
    </div>

    <div class="taskbar">
        <div class="app-menu-btn" onclick="document.getElementById('app-menu').classList.toggle('active')"><span>üêâ</span> Menu</div>
        <div style="flex: 1; padding-left: 15px; color: #555; font-size: 12px;">Kali Desktop 2024.1</div>
        <div id="clock" style="color: white; font-weight: bold; font-size: 13px;">00:00</div>
    </div>

    <div class="menu-panel" id="app-menu">
        <div class="menu-category">Favoris</div>
        <div class="menu-item" onclick="openWindow('terminal-window')">üíª Terminal</div>
        <div class="menu-item" onclick="openWindow('cv-window')">üë§ Mon CV</div>
        <div class="menu-category">S√©curit√©</div>
        <div class="menu-item" onclick="openWindow('scanner-window')">üì° NetScanner</div>
        <div class="menu-item" onclick="openWindow('sniffer-window')">üîç Wireshark</div>
        <div class="menu-category">Outils</div>
        <div class="menu-item" onclick="openWindow('passgen-window')">üîë PassGen</div>
        <div class="menu-item" onclick="openWindow('calc-window')">üî¢ Calculatrice</div>
    </div>

    <script>
        let zIndex = 100;
        let calcVal = "0";

        // LOGIN
        function unlockSystem() {
            const pass = document.getElementById('login-pass');
            if (pass.value.toLowerCase() === "kali" || pass.value === "") {
                document.getElementById('login-screen').classList.add('hidden');
                showNotification('Syst√®me', 'Session ouverte pour Charles.');
            } else {
                document.getElementById('login-error').style.display = 'block';
                pass.style.borderColor = 'red';
            }
        }
        document.getElementById('login-pass').addEventListener('keypress', (e) => { if(e.key === 'Enter') unlockSystem(); });

        // MATRIX
        const canvas = document.getElementById('matrix-canvas');
        const ctx = canvas.getContext('2d');
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        const drops = Array(Math.floor(canvas.width / 16)).fill(1);
        function drawMatrix() {
            ctx.fillStyle = "rgba(0,0,0,0.05)"; ctx.fillRect(0,0,canvas.width,canvas.height);
            ctx.fillStyle = "#0F0"; ctx.font = "15px monospace";
            drops.forEach((y, i) => {
                ctx.fillText(String.fromCharCode(Math.random()*128), i*16, y*16);
                if(y*16 > canvas.height && Math.random() > 0.975) drops[i] = 0;
                drops[i]++;
            });
        }
        setInterval(drawMatrix, 35);

        // FEN√äTRES
        function openWindow(id) {
            const w = document.getElementById(id); w.style.display = 'flex'; w.style.zIndex = ++zIndex;
            document.getElementById('app-menu').classList.remove('active');
            if(id === 'sniffer-window') startWireshark();
        }
        document.querySelectorAll('.desktop-icon').forEach(i => i.onclick = () => openWindow(i.dataset.app + '-window'));
        document.querySelectorAll('.close').forEach(b => b.onclick = () => document.getElementById(b.dataset.window).style.display = 'none');

        // DRAG
        document.querySelectorAll('.window-header').forEach(h => {
            h.onmousedown = (e) => {
                const w = h.parentElement; w.style.zIndex = ++zIndex;
                let ox = e.clientX - w.offsetLeft, oy = e.clientY - w.offsetTop;
                document.onmousemove = (ev) => { w.style.left = ev.clientX-ox+'px'; w.style.top = ev.clientY-oy+'px'; };
                document.onmouseup = () => document.onmousemove = null;
            }
        });

        // WIRESHARK SIM
        let pCounter = 1;
        function startWireshark() {
            const body = document.getElementById('packet-body');
            if(body.innerHTML !== "") return;
            const scenarios = [
                {p: 'TCP', i: '443 ‚Üí 52104 [ACK] Seq=1 Ack=1', c: 'proto-tcp'},
                {p: 'TLSv1.3', i: 'Application Data', c: 'proto-tls'},
                {p: 'DNS', i: 'Query A github.com', c: 'proto-dns'},
                {p: 'HTTP', i: 'GET /portfolio HTTP/1.1', c: 'proto-http'}
            ];
            setInterval(() => {
                if(document.getElementById('sniffer-window').style.display === 'flex') {
                    const s = scenarios[Math.floor(Math.random()*scenarios.length)];
                    const row = document.createElement('tr');
                    row.className = s.c;
                    row.innerHTML = `<td>${pCounter++}</td><td>${(Math.random()*2).toFixed(4)}</td><td>192.168.1.15</td><td>8.8.8.8</td><td>${s.p}</td><td>${s.i}</td>`;
                    body.appendChild(row);
                    const container = document.querySelector('#sniffer-window .window-content');
                    container.scrollTop = container.scrollHeight;
                }
            }, 1500);
        }

        // SCANNER
        function runScan() {
            const btn = document.getElementById('scan-btn'), res = document.getElementById('scan-res');
            btn.disabled = true; res.innerHTML = "Starting Nmap 7.94...";
            ["Scanning 192.168.1.1...", "Port 80/tcp open  http", "Scanning 192.168.1.15...", "Port 22/tcp open  ssh", "Nmap done: 2 IP addresses scanned."].forEach((s, i) => {
                setTimeout(() => { res.innerHTML += "<br>> " + s; res.scrollTop = res.scrollHeight; if(i===4) btn.disabled = false; }, i*800);
            });
        }

        // TERMINAL
        const tInput = document.getElementById('terminal-input');
        tInput.onkeydown = (e) => {
            if(e.key === 'Enter') {
                const cmd = tInput.value.toLowerCase().trim();
                const l = document.createElement('div'); l.innerHTML = `<span style="color:#367bf0">kali@kali:~$</span> ${cmd}`;
                document.getElementById('terminal').insertBefore(l, document.getElementById('input-line'));
                if(cmd === 'ls') addL("CV.sh  notes.txt  projects/");
                else if(cmd === 'help') addL("Commands: ls, clear, whoami, help, date");
                else if(cmd === 'clear') { document.getElementById('terminal').innerHTML = ''; document.getElementById('terminal').appendChild(document.getElementById('input-line')); }
                tInput.value = '';
            }
        };
        function addL(t) { const d = document.createElement('div'); d.className='terminal-line'; d.textContent=t; document.getElementById('terminal').insertBefore(d, document.getElementById('input-line')); }

        function downloadCV() {
            document.getElementById('cv-window').style.display = 'none'; openWindow('terminal-window');
            ["Connecting...", "Downloading CV_Arsenault.pdf...", "Success: 100%"].forEach((txt, i) => {
                setTimeout(() => {
                    const d = document.createElement('div'); d.className='terminal-line'; d.textContent="> " + txt;
                    if(i===2) d.style.color="#50c878";
                    document.getElementById('terminal').insertBefore(d, document.getElementById('input-line'));
                }, i*700);
            });
        }

        // UTILS
        function pressCalc(v) {
            const d = document.getElementById('calc-display');
            if(v==='C') calcVal = "0"; else if(v==='=') try { calcVal = eval(calcVal).toString(); } catch { calcVal = "Error"; }
            else calcVal = calcVal === "0" ? v : calcVal + v;
            d.textContent = calcVal;
        }
        function generatePass() { document.getElementById('pass-out').textContent = Math.random().toString(36).slice(-10)+"!"; }
        function showNotification(t, m) {
            const n = document.createElement('div'); n.className = 'notification'; n.innerHTML = `<b>${t}</b><br>${m}`;
            document.body.appendChild(n); setTimeout(() => n.remove(), 3000);
        }
        setInterval(() => {
            const d = new Date(); document.getElementById('clock').textContent = d.getHours().toString().padStart(2,'0')+":"+d.getMinutes().toString().padStart(2,'0');
            const cpu = Math.floor(Math.random()*20+5); document.getElementById('cpu-fill').style.width = cpu+'%'; document.getElementById('cpu-val').textContent = cpu+'%';
        }, 1000);
        document.body.onclick = () => { document.getElementById('context-menu').style.display = 'none'; };
        document.oncontextmenu = (e) => { e.preventDefault(); const m = document.getElementById('context-menu'); m.style.display='block'; m.style.left=e.pageX+'px'; m.style.top=e.pageY+'px'; };
    </script>
</body>
</html>
